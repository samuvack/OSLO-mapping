<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9F4LJXRX6T"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9F4LJXRX6T', { 'anonymize_ip': true }); </script> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Quick start | Technical Documentation</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Quick start" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Quick start" /> <meta property="og:description" content="Quick start" /> <link rel="canonical" href="http://localhost:4000/quickstart/quickstart" /> <meta property="og:url" content="http://localhost:4000/quickstart/quickstart" /> <meta property="og:site_name" content="Technical Documentation" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2023-10-10T14:17:05+02:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Quick start" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-10-10T14:17:05+02:00","datePublished":"2023-10-10T14:17:05+02:00","description":"Quick start","headline":"Quick start","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/quickstart/quickstart"},"url":"http://localhost:4000/quickstart/quickstart"}</script> <!-- End Jekyll SEO tag --> <div class="test-header" data-v-df634f57="" data-v-7a7a37b1=""> <div class="global-header" data-v-df634f57=""><img src="/VSDS-Tech-Docs/images/LOGO_Vlaanderen_NIV2.svg" alt="Vlaanderen" data-v-df634f57=""><img class="small-global-header-divider" src="/VSDS-Tech-Docs/images/divider_globalheader.svg" alt="divider" data-v-df634f57=""><span class="header-title header-font" data-v-df634f57="">Vlaamse Smart Data Space</span><span class="spacer" data-v-df634f57=""></span> <div id="help-needed" data-v-df634f57=""><span class="header-font" data-v-df634f57="">Hulp nodig</span><img class="question-menu-item" src="/VSDS-Tech-Docs/images/question-mark.svg" alt="?" data-v-df634f57=""></div> </div> <hr class="divider" data-v-df634f57=""> </div> <style> #help-needed[data-v-df634f57] { display: flex; align-items: center; gap: 5px; background-image: url(/VSDS-Tech-Docs/images/hulp_nodig.svg); width: 144px; height: 44px; } .global-header[data-v-df634f57] { display: flex; margin-left: 0px; align-items: center; position: fixed; width: 100%; border-bottom:0.5px solid rgb(138, 138, 138); background-color: white; z-index: 100; } .test-header{ margin-bottom: 20px; overflow:hidden; } element.style { } .small-global-header-divider[data-v-df634f57] { margin: 0 8px 0 4px; } .header-font { color: #333332; font-family: Flanders Art Sans, sans-serif; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.5px; text-transform: uppercase; } .spacer { flex-grow: 1; } .divider { border: 1px solid #8f8f8f66; margin: 0; } #help-needed > span[data-v-df634f57] { margin-left: 25px; } </style> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Technical Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/core/index" class="nav-list-link external"> Linked Data Interactions Core Building Blocks <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/ldio/index" class="nav-list-link external"> Linked Data Interactions Orchestrator <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://informatievlaanderen.github.io/VSDS-Linked-Data-Interactions/ldi-nifi/index" class="nav-list-link external"> Linked Data Interactions For Apache Nifi <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> <div class="nav-category">Introduction to LDES</div> <ul class="nav-list"><li class="nav-list-item"><a href="/introduction/Introduction" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/introduction/LDES_client" class="nav-list-link">LDES Client</a></li><li class="nav-list-item"><a href="/introduction/LDES_server" class="nav-list-link">LDES Server</a></li><li class="nav-list-item"><a href="/introduction/Specification" class="nav-list-link">Specification</a></li></ul> <div class="nav-category">Quickstart</div> <ul class="nav-list"><li class="nav-list-item"><a href="/quickstart/LDES2services" class="nav-list-link">LDES2Service</a></li><li class="nav-list-item active"><a href="/quickstart/quickstart" class="nav-list-link active">Quick start</a></li><li class="nav-list-item"><a href="/quickstart/Use_case_LDES_server" class="nav-list-link">Use case LDES server</a></li></ul> <div class="nav-category">Linked Data Interactions Core Building Blocks</div> <ul class="nav-list"></ul> <div class="nav-category">Linked Data Interactions Orchestrator</div> <ul class="nav-list"></ul> <div class="nav-category">Linked Data Interactions for Apache NiFi</div> <ul class="nav-list"></ul> <div class="nav-category">Release Management</div> <ul class="nav-list"></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Technical Documentation" aria-label="Search Technical Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="quick-start"> <a href="#quick-start" class="anchor-heading" aria-labelledby="quick-start"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quick start </h1> <h2 id="ldes-server--ldes-client"> <a href="#ldes-server--ldes-client" class="anchor-heading" aria-labelledby="ldes-server--ldes-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> LDES Server &amp; LDES Client </h2> <p>This example focuses on both publishing and consuming a <a href="https://semiceu.github.io/LinkedDataEventStreams/">Linked Data Event Stream</a> (LDES). We start by explaining how to setup an LDES server and publish data as an LDES, followed by the setup of the LDES client to replicate an LDES. In this example, the data examples are described with <a href="https://data.vlaanderen.be/">OSLO</a> (the Flemish Interoperability Program) ontologies.</p> <p><a href="https://github.com/Informatievlaanderen/VSDS-Tech-Docs/tree/main/files/quickstart" download=""> The files you will use for this quick start guide is available here </a> <br /> <br /></p> <p class="note">This quick start example demonstrates only a small amount of the capabilities of the LDES Server. For more information about the LDES server, please consult the <a href="https://github.com/Informatievlaanderen/VSDS-LDESServer4J">LDES Server Manual</a>.</p> <h3 id="before-starting"> <a href="#before-starting" class="anchor-heading" aria-labelledby="before-starting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before starting </h3> <ol> <li>Make sure <a href="https://docker.com/">Docker</a> has been installed on your device.</li> <li>Local Ports <em>8080</em>, and <em>27017</em> are accessible.</li> <li>The command script is written in <a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29">bash</a> code. Please modify it accordingly.</li> </ol> <h3 id="setup-an-ldes-server"> <a href="#setup-an-ldes-server" class="anchor-heading" aria-labelledby="setup-an-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup an LDES Server </h3> <p>To start a default LDES Server, a few basic steps are needed.</p> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">ldes-server.yml</code> config file with this basic content</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mongock</span><span class="pi">:</span>
  <span class="na">migration-scan-package</span><span class="pi">:</span> <span class="s">VSDS</span>
<span class="na">springdoc</span><span class="pi">:</span>
  <span class="na">swagger-ui</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/v1/swagger</span>
<span class="na">ldes-server</span><span class="pi">:</span>
  <span class="na">host-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://localhost:8080"</span>
<span class="na">management</span><span class="pi">:</span>
  <span class="na">tracing</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="kc">false</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">mongodb</span><span class="pi">:</span>
      <span class="na">database</span><span class="pi">:</span> <span class="s">ldes</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">ldes-mongodb</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">27017</span>
      <span class="na">auto-index-creation</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div> </div> </li> <li> <p>Create a local <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file with the content below.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">ldes-server</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-server</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ldes/ldes-server:1.0.0-SNAPSHOT</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldes-server.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes-mongodb</span>
  <span class="na">ldes-mongodb</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">quick_start_ldes-mongodb</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo:6.0.4</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">27017:27017</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
  <span class="na">ldio-workbench</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-replication</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ldes/ldi-orchestrator:1.0.0-SNAPSHOT</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_NAME=application</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldio.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">${LDIO_WORKBENCH_PORT:-8081}:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">profiles</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">delay-started</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">ldes</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">quick_start_network</span>
</code></pre></div> </div> </li> <li>Run <code class="language-plaintext highlighter-rouge">docker compose up</code> within the work directory of <code class="language-plaintext highlighter-rouge">.yml</code> file, to start the containers.</li> <li>The LDES Server is now available at port <code class="language-plaintext highlighter-rouge">8080</code> and accepts members via <code class="language-plaintext highlighter-rouge">HTTP POST</code> requests.</li> <li> <p>We will now configure the LDES Server. (note that this part can also be done with the Swagger endpoint (<code class="language-plaintext highlighter-rouge">/v1/swagger</code>), where more detailed documentation is available)</p> </li> <li>Let’s set the DCAT metadata for the server by defining a title and a description:</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
  <span class="s1">'http://localhost:8080/admin/api/v1/dcat'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: text/plain'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
  <span class="nt">---data-raw</span> <span class="s1">'  @prefix dct:   &lt;http://purl.org/dc/terms/&gt; .
                 @prefix dcat:  &lt;http://www.w3.org/ns/dcat#&gt; .

                 [] a dcat:Catalog ;
                    dct:title "My LDES'</span><span class="se">\'</span><span class="s1">'es"@en ;
                    dct:description "All LDES'</span><span class="se">\'</span><span class="s1">'es from publiser X"@en .
        '</span>
</code></pre></div></div> <ul> <li> <p>Next, let’s add collection for our mobility hindrances. This will be used to replicate the dataset from GIPOD:</p> <ul> <li>A collection name “mobility-hindrances”</li> <li>Will process members of type “https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”</li> <li>Will have 2 views : <ul> <li>A default view, which provides a basic view using a paginated fragmention. This also enables snapshotting. (this view is called <code class="language-plaintext highlighter-rouge">by-page</code> by default)</li> <li>A time-based fragmented view. This will fragment the members based on their timebased property. This value is by default set to <code class="language-plaintext highlighter-rouge">http://www.w3.org/ns/prov#generatedAtTime</code></li> </ul> </li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'PUT'</span> <span class="s1">'http://localhost:8080/admin/api/v1/eventstreams'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: text/turtle'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'@prefix ldes: &lt;https://w3id.org/ldes#&gt; .
            @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
            @prefix tree: &lt;https://w3id.org/tree#&gt;.
            @prefix sh:   &lt;http://www.w3.org/ns/shacl#&gt; .
            @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
            @prefix example: &lt;http://example.org/&gt; .
            @prefix collection: &lt;/mobility-hindrances/&gt; .


            &lt;/mobility-hindrances&gt; a ldes:EventStream ;
                ldes:timestampPath dcterms:created ;
                ldes:versionOfPath dcterms:isVersionOf ;
                example:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt; ;
                example:hasDefaultView "true"^^xsd:boolean ;
                ldes:view collection:time-based ;
                tree:shape [
                    a sh:NodeShape ;
                ] .

            collection:time-based tree:viewDescription [
                ldes:retentionPolicy [
                    a ldes:DurationAgoPolicy  ;
                    tree:value "PT2M"^^xsd:duration ;
                ] ;
                tree:fragmentationStrategy ([
                    a tree:Fragmentation ;
                    tree:name "timebased" ;
                    tree:memberLimit "20" ;
                ]) ;
            ] .
    '</span>
</code></pre></div> </div> </li> <li> <p>Let’s add some DCAT metadata for this collection:</p> <ul> <li>We define an English and Dutch title and description</li> <li>We define the creator of the collection to be http://sample.org/company/MyDataOwner</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams/mobility-hindrances/dcat'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: */*'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'  @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; .
      @prefix dct: &lt;http://purl.org/dc/terms/&gt; .
        [] a dcat:Dataset ;
            dct:title "Mobility Hindrances Collection"@en ;
            dct:title "Mobiliteitshindernissen collectie"@nl ;
            dct:description "A collection containing mobility hindrances"@en ;
            dct:description "Een collectie met Mobiliteitshindernissen"@nl ;
            dct:creator &lt;http://sample.org/company/MyDataOwner&gt; ;'</span>
</code></pre></div> </div> </li> <li> <p>We’ll now also set the DCAT metadata for the time-based view by defining a title and a description :</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'POST'</span> <span class="se">\</span>
<span class="s1">'http://localhost:8080/admin/api/v1/eventstreams/mobility-hindrances/views/time-based/dcat'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: */*'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">-d</span> <span class="s1">'@prefix dct:   &lt;http://purl.org/dc/terms/&gt; .
    @prefix dcat:  &lt;http://www.w3.org/ns/dcat#&gt; .

    [] a dcat:DataService ;
    dct:title "My timebased view"@en ;
    dct:description "Timebased fragmentation for the mobility-hindrances "@en .
    '</span>
</code></pre></div> </div> </li> <li> <p>Next, let’s add a second collection to collect observations:</p> <ul> <li>A collection name “observations”</li> <li>Will process members of type “https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection”</li> <li>Will have a default view, which provides a basic view using a paginated fragmention. This also enables snapshotting.</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> <span class="s1">'PUT'</span> <span class="s1">'http://localhost:8080/admin/api/v1/eventstreams'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'accept: text/turtle'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: text/turtle'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'@prefix ldes: &lt;https://w3id.org/ldes#&gt; .
            @prefix example: &lt;http://example.org/&gt; .
            @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
            @prefix tree: &lt;https://w3id.org/tree#&gt;.
            @prefix sh:   &lt;http://www.w3.org/ns/shacl#&gt; .
            @prefix server: &lt;http://localhost:8080/&gt; .
            @prefix xsd:  &lt;http://www.w3.org/2001/XMLSchema#&gt; .


            server:observations a ldes:EventStream ;
                ldes:timestampPath dcterms:created ;
                ldes:versionOfPath dcterms:isVersionOf ;
                example:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection&gt; ;
                example:hasDefaultView "true"^^xsd:boolean ;
                tree:shape [
                    a sh:NodeShape ;
                ] .
            '</span>
</code></pre></div> </div> </li> </ul> <h3 id="add-data-to-the-ldes-server"> <a href="#add-data-to-the-ldes-server" class="anchor-heading" aria-labelledby="add-data-to-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add data to the LDES Server </h3> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">observation.ttl</code> file with the following content:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dc:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">prov:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">sosa:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/sosa/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns0:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/SamplingFeature#SF_SamplingFeatureCollection.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns1:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Observation#OM_Observation.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns2:</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19103/2005/UnitsOfMeasure#Measure.&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns3:</span><span class="w"> </span><span class="nl">&lt;https://schema.org/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;urn:ngsi-ld:WaterQualityObserved:woq:1/2023-03-12T18:31:17.003Z&gt;</span><span class="w">
</span><span class="nn">dc:</span><span class="n">isVersionOf</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-ld:WaterQualityObserved:woq:1&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">sosa:</span><span class="n">hasFeatureOfInterest</span><span class="w"> </span><span class="s">"spt-00035-79"</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">ns0:</span><span class="n">member</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/loc-00019-33&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mf">2.0</span><span class="mi">43000</span><span class="n">e+1</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/CEL&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/waterkwaliteitparameter/temperatuur&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mi">1442</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/HP&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/observatieparameter/hydrostatische-druk&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">sosa:</span><span class="n">madeBySensor</span><span class="w"> </span><span class="nl">&lt;urn:ngsi-v2:cot-imec-be:Device:imec-iow-UR5gEycRuaafxnhvjd9jnU&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">result</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">value</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">value</span><span class="w"> </span><span class="mi">6150</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ns3:</span><span class="n">unitCode</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/G42&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">phenomenonTime</span><span class="w"> </span><span class="s">"2023-03-12T18:31:17.003Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">datetime</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">observedProperty</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/concept/waterkwaliteitparameter/conductiviteit&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns1:</span><span class="n">featureOfInterest</span><span class="w"> </span><span class="nl">&lt;https://data.vmm.be/id/spt-00035-79&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/Measurement#OM_Measurement&gt;</span><span class="w">
</span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#ObservationCollection&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;https://data.vmm.be/id/loc-00019-33&gt;</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;http://def.isotc211.org/iso19156/2011/SpatialSamplingFeature#SF_SpatialSamplingFeature&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p>Run the following command to post the <code class="language-plaintext highlighter-rouge">observation.ttl</code> to the LDES Server.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST http://localhost:8080/observations <span class="nt">-H</span> <span class="s2">"Content-Type: application/ttl"</span> <span class="nt">-d</span> <span class="s2">"@observation.ttl"</span>
</code></pre></div> </div> </li> </ul> <h3 id="replicating-an-ldes-using-the-ldes-client"> <a href="#replicating-an-ldes-using-the-ldes-client" class="anchor-heading" aria-labelledby="replicating-an-ldes-using-the-ldes-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Replicating an LDES using the LDES Client </h3> <ul> <li> <p>Create a <code class="language-plaintext highlighter-rouge">ldio.yml</code> file in the same directory as your <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> with the following content:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">orchestrator</span><span class="pi">:</span>
  <span class="na">pipelines</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">gipod-replicator</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">HTTP</span><span class="nv"> </span><span class="s">polling,</span><span class="nv"> </span><span class="s">OSLO</span><span class="nv"> </span><span class="s">transformation,</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">creation</span><span class="nv"> </span><span class="s">&amp;</span><span class="nv"> </span><span class="s">HTTP</span><span class="nv"> </span><span class="s">sending."</span>
      <span class="na">input</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">be.vlaanderen.informatievlaanderen.ldes.ldi.client.LdioLdesClient</span>
        <span class="na">config</span><span class="pi">:</span>
          <span class="na">url</span><span class="pi">:</span> <span class="s">https://private-api.gipod.vlaanderen.be/api/v1/ldes/mobility-hindrances</span>
      <span class="na">outputs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">be.vlaanderen.informatievlaanderen.ldes.ldio.LdioHttpOut</span>
          <span class="na">config</span><span class="pi">:</span>
            <span class="na">endpoint</span><span class="pi">:</span> <span class="s">http://host.docker.internal:8080/mobility-hindrances</span>
            <span class="na">content-type</span><span class="pi">:</span> <span class="s">application/n-quads</span>
</code></pre></div> </div> </li> <li> <p>Execute the following command to start up the LDIO <code class="language-plaintext highlighter-rouge">docker compose up ldio-workbench -d</code></p> </li> <li> <p>Validate your LDES server is being populated by going to <code class="language-plaintext highlighter-rouge">http://localhost:8080/mobility-hindrances/by-page?pageNumber=1</code> and <code class="language-plaintext highlighter-rouge">http://localhost:8080/mobility-hindrances/time-based</code>. These streams should fill up as the LDES Client send members to your server.</p> </li> </ul> <h3 id="tear-down-the-infrastructure-and-remove-the-volumes"> <a href="#tear-down-the-infrastructure-and-remove-the-volumes" class="anchor-heading" aria-labelledby="tear-down-the-infrastructure-and-remove-the-volumes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tear down the infrastructure and remove the volumes </h3> <ul> <li>Within the working directory, please run <code class="language-plaintext highlighter-rouge">docker rm -f $(docker ps -a -q)</code></li> </ul> <h2 id="ldes2service"> <a href="#ldes2service" class="anchor-heading" aria-labelledby="ldes2service"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> LDES2Service </h2><pre><code class="language-note">***Please Note!***

_The purpose of the quick start try-out is solely to create _[Pagination fragmentation](https://github.com/Informatievlaanderen/VSDS-LDESServer4J/tree/main/ldes-fragmentisers/ldes-fragmentisers-pagination)_ for the self-generated data type to _[LDES format](https://semiceu.github.io/LinkedDataEventStreams/)_. To support other fragments, data types, or other features, e.g., retention, caching, etc., please consult _[LDES Server Manual](https://github.com/Informatievlaanderen/VSDS-LDESServer4J)_ for the configurations._

[Vlaamse Smart Data Space](https://www.vlaanderen.be/digitaal-vlaanderen/onze-oplossingen/vlaamse-smart-data-space)_ projects also provide methods for transforming data to *[LDES format](https://semiceu.github.io/LinkedDataEventStreams/)_, e.g. from _[NGSI-V2](https://vloca-kennishub.vlaanderen.be/NGSI-v2)* to *[NGSI-LD](https://en.wikipedia.org/wiki/NGSI-LD)_, from NGSI to _[OSLO](https://www.vlaanderen.be/digitaal-vlaanderen/onze-oplossingen/oslo)_ Model, from _[NGSI-V2](https://vloca-kennishub.vlaanderen.be/NGSI-v2)_ to _[LDES (LinkedDataEventStreams)](https://semiceu.github.io/LinkedDataEventStreams/).

</code></pre><pre><code class="language-tip">Having trouble implementing this example? Please post your issue on the [VSDS Tech docs repo](https://github.com/Informatievlaanderen/VSDS-Tech-Docs/issues).

</code></pre><p>In this short example below, we show you how the components of the VSDS can be used to link multiple data streams across domains and systems using LDES. The whole story can be read here: <a href="https://pub.towardsai.net/real-time-data-linkage-via-linked-data-event-streams-e1aab3090b40">Real-Time Data Linkage via Linked Data Event Streams</a></p> <h3 id="before-starting-1"> <a href="#before-starting-1" class="anchor-heading" aria-labelledby="before-starting-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before starting </h3> <ol> <li><a href="https://docker.com/">Docker</a> has been installed on your device.</li> <li>Local Ports 8443 and 7200 are accessible.</li> </ol> <h3 id="start-your-ldes-workbench"> <a href="#start-your-ldes-workbench" class="anchor-heading" aria-labelledby="start-your-ldes-workbench"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Start your LDES workbench </h3> <ol> <li>Create a local <a href="https://github.com/samuvack/ldes-grar/blob/main/docker-compose.yml">docker-compose.yml</a> file with the following content, or you could use the current good-to-go <a href="https://github.com/samuvack/ldes-grar">GetStarted GRAR project</a>:</li> </ol> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s">‘3’</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">nifi-database-repository</span><span class="pi">:</span>
  <span class="na">nifi-flowfile-repository</span><span class="pi">:</span>
  <span class="na">nifi-content-repository</span><span class="pi">:</span>
  <span class="na">nifi-provenance-repository</span><span class="pi">:</span>
  <span class="na">nifi-state</span><span class="pi">:</span>
  <span class="na">nifi-logs</span><span class="pi">:</span>
  <span class="na">nifi-nars</span><span class="pi">:</span>
  <span class="na">nifi-conf</span><span class="pi">:</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">front-tier</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
  <span class="na">back-tier</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">nifi</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/informatievlaanderen/ldes-workbench-nifi:20230214T123440</span> <span class="c1">#20221109T103745</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">nifi-graph</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="c1"># HTTPS</span>
      <span class="pi">-</span> <span class="s">8443:8443/tcp</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./nifi-extensions:/opt/nifi/nifi-current/extensions</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">NIFI_UI_PORT=8443</span>
      <span class="pi">-</span> <span class="s">SINGLE_USER_CREDENTIALS_USERNAME=admin</span>
      <span class="pi">-</span> <span class="s">SINGLE_USER_CREDENTIALS_PASSWORD=admin123456789</span>
      <span class="pi">-</span> <span class="s">NIFI_WORKFLOW_LISTEN_PORT=9005</span>
      <span class="pi">-</span> <span class="s">NIFI_JVM_HEAP_INIT=8g</span>
      <span class="pi">-</span> <span class="s">NIFI_JVM_HEAP_MAX=8g</span>
  <span class="na">graphdb</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ontotext/graphdb:10.0.2</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">graphdb3</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="c1"># HTTP</span>
      <span class="pi">-</span> <span class="s">7200:7200</span>
</code></pre></div></div> <p>To begin, the command for launching GraphDb and Apache NiFi within a docker container is as follows:</p><pre><code class="language-source-shell">docker compose up --build
</code></pre><p>Apache Nifi runs on port 8443:8443/tcp :<a href="https://localhost:8443/">https://localhost:8443</a><br /> GraphDB runs on port 7200 :7200/tcp : <a href="http://localhost:7200/">http://localhost:7200</a></p> <p>A data flow can be built up by dragging in building blocks in the graphical user interface of Apache NiFi. This docker container contains all the components out the latest version of the LDES workbench (e.g., latest LDES Client, LDES server, etc.). Every data stream can be transformed into a Linked Data Event Stream with a conversion data flow.</p> <h3 id="starting-from-a-published-ldes"> <a href="#starting-from-a-published-ldes" class="anchor-heading" aria-labelledby="starting-from-a-published-ldes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Starting from a published <a href="https://semiceu.github.io/LinkedDataEventStreams/">LDES</a> </h3> <p>In this example, we start from published LDES</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">conceptscheme:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/id/conceptscheme/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">generiek:</span><span class="w">      </span><span class="nl">&lt;https://data.vlaanderen.be/ns/generiek#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">geosparql:</span><span class="w">     </span><span class="nl">&lt;http://www.opengis.net/ont/geosparql#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w">          </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">locn:</span><span class="w">          </span><span class="nl">&lt;https://www.w3.org/ns/locn#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">prov:</span><span class="w">          </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">rdf:</span><span class="w">           </span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">relation:</span><span class="w">      </span><span class="nl">&lt;http://www.iana.org/assignments/relation/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">terms:</span><span class="w">         </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w">          </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nn">https:</span><span class="n">//data</span><span class="p">.</span><span class="n">vlaanderen</span><span class="p">.</span><span class="n">be/id/adres/1658513
</span><span class="w">        </span><span class="nn">relation:</span><span class="n">self</span><span class="w">  </span><span class="s">"https://api.basisregisters.staging-vlaanderen.be/v2/adressen/1658513"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="p">[</span><span class="w"> </span><span class="nn">https:</span><span class="n">//data</span><span class="p">.</span><span class="n">vlaanderen</span><span class="p">.</span><span class="n">be/ns/gebouw</span><span class="c1">#bestaatUit</span><span class="w">
          </span><span class="nl">&lt;https://data.vlaanderen.be/id/gebouweenheid/17631816/2022-06-27T16:23:49+02:00&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">generiek:</span><span class="n">lokaleIdentificator</span><span class="w">  </span><span class="s">"17631524"</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="p">[</span><span class="w"> </span><span class="nn">https:</span><span class="n">//data</span><span class="p">.</span><span class="n">vlaanderen</span><span class="p">.</span><span class="n">be/ns/gebouw</span><span class="c1">#bestaatUit</span><span class="w">
</span><span class="nl">&lt;https://data.vlaanderen.be/id/gebouweenheid/6311633/2022-06-27T16:23:48+02:00&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">  </span><span class="nn">generiek:</span><span class="n">lokaleIdentificator</span><span class="w">  </span><span class="s">"6310652"</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nn">https:</span><span class="n">//data</span><span class="p">.</span><span class="n">vlaanderen</span><span class="p">.</span><span class="nn">be/id/gebouweenheid/14539518/2022-06-27T16:</span><span class="mi">23</span><span class="nn">:</span><span class="mi">32+02</span><span class="nn">:</span><span class="mi">00</span><span class="w">
   </span><span class="nn">rdf:</span><span class="n">type</span><span class="w">                      </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#Gebouweenheid&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">terms:</span><span class="n">isVersionOf</span><span class="w">             </span><span class="nl">&lt;https://data.vlaanderen.be/id/gebouweenheid/14539518&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">        </span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w">          </span><span class="s">"2022-06-27T16:23:32+02:00"</span><span class="p">^^</span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#Gebouweenheid.adres&gt;</span><span class="w">                </span><span class="nl">&lt;https://data.vlaanderen.be/id/adres/5162364&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#Gebouweenheid.geometrie&gt;</span><span class="w">
                </span><span class="p">[</span><span class="w"> </span><span class="nn">conceptscheme:</span><span class="n">geometriemethode</span><span class="w">  </span><span class="nn">conceptscheme:</span><span class="n">aangeduidDoorBeheerder</span><span class="w"> </span><span class="p">;</span><span class="w">                  </span><span class="nn">locn:</span><span class="n">geometry</span><span class="w">                   </span><span class="p">[</span><span class="w"> </span><span class="nn">geosparql:</span><span class="n">asGML</span><span class="w">                                    </span><span class="s">"&lt;gml:Point srsName=\"http://www.opengis.net/def/crs/EPSG/0/31370\" xmlns:gml=\"http://www.opengis.net/gml/3.2\"&gt;&lt;gml:pos&gt;200647.71 210393.46&lt;/gml:pos&gt;&lt;/gml:Point&gt;"</span><span class="p">^^</span><span class="nn">geosparql:</span><span class="n">gmlLiteral</span><span class="w"> </span><span class="p">]</span><span class="w">                </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">        </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#Gebouweenheid.status&gt;</span><span class="w">
                </span><span class="nn">conceptscheme:</span><span class="n">gerealiseerd</span><span class="w"> </span><span class="p">;</span><span class="w">       </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#functie&gt;</span><span class="w">                </span><span class="nn">conceptscheme:</span><span class="n">nietGekend</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">generiek:</span><span class="n">lokaleIdentificator</span><span class="w">  </span><span class="s">"14539518"</span><span class="w"> </span><span class="p">;</span><span class="w">        </span><span class="nn">generiek:</span><span class="n">naamruimte</span><span class="w">           </span><span class="s">"https://data.vlaanderen.be/id/gebouweenheid"</span><span class="w"> </span><span class="p">;</span><span class="w">        </span><span class="nn">generiek:</span><span class="n">versieIdentificator</span><span class="w">  </span><span class="s">"2022-06-27T16:23:32+02:00"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://data.vlaanderen.be/id/adres/2213034&gt;</span><span class="w">        </span><span class="nn">relation:</span><span class="n">self</span><span class="w">  </span><span class="s">"https://api.basisregisters.staging-vlaanderen.be/v2/adressen/2213034"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <h3 id="consuming-an-ldes"> <a href="#consuming-an-ldes" class="anchor-heading" aria-labelledby="consuming-an-ldes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Consuming an LDES </h3> <p>For this purpose, the three Linked Data Event streams are stored in a <a href="https://graphdb.ontotext.com/">GraphDB</a> to facilitate efficient and effective data consumption. GraphDB supports complex semantic queries and inference, making discovering meaningful relationships between different data sources possible.</p> <p><img src="../images/LdesToGrapDB.PNG" alt="Afbeelding met grafiek Automatisch gegenereerde beschrijving" /></p> <ol> <li> <p>Start Apache NiFi on localhost:8433</p> </li> <li> <p>Import data flow by importing <a href="https://raw.githubusercontent.com/samuvack/ldes-grar/main/NiFi_Flow.json">Apache NiFi configuration file</a>. See <a href="https://www.alasdairb.com/posts/importing-individual-flow-definitions-in-nifi/">this site for more info</a></p> </li> <li> <p>Add <a href="https://onboarding1.smartdataspace.beta-vlaanderen.be/building-units/by-page">LDES endpoint</a> in the LDES client</p> </li> <li> <p>Start Apache NiFi data flow</p> </li> </ol> <p><img src="../images/exampleTwoFlow.png" alt="" /></p> <ol> <li> <p>Open GraphDB on localhost:7200/sparql</p> </li> <li> <p>Run a semantic query with SPARQL</p> </li> </ol> <p><img src="../images/GrapDB.png" alt="" /></p> <p>Below you find an example of a SPARQL query. This query returns triples with information about the parcel LDES.</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">PREFIX</span><span class="w"> </span><span class="nn">adres:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/id/adres/&gt;</span><span class="w">
</span><span class="kd">PREFIX</span><span class="w"> </span><span class="nn">gebouw:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/id/?gebouweenheid/&gt;</span><span class="w">
</span><span class="kd">PREFIX</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#&gt;</span><span class="w">
</span><span class="kd">PREFIX</span><span class="w"> </span><span class="nn">prov:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w">
</span><span class="kd">PREFIX</span><span class="w"> </span><span class="nn">generiek:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/generiek#&gt;</span><span class="w">
</span><span class="kd">PREFIX</span><span class="w"> </span><span class="nn">rdf:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><span class="w">
</span><span class="n">construct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="n">?generatedAtTime</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">rdf:</span><span class="n">type</span><span class="w"> </span><span class="n">?type</span><span class="w"> </span><span class="p">.</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="n">Gebouweenheid</span><span class="p">.</span><span class="n">geometrie</span><span class="w"> </span><span class="n">?geometrie</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="n">Gebouweenheid</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="n">?status</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="n">functie</span><span class="w"> </span><span class="n">?functie</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">generiek:</span><span class="n">lokaleIdentificator</span><span class="w"> </span><span class="n">?lokaleIdentificator</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">generiek:</span><span class="n">naamruimte</span><span class="w"> </span><span class="n">?naamruimte</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">generiek:</span><span class="n">versieIdentificator</span><span class="w"> </span><span class="n">?versieIdentificator</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="p">{</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#Gebouweenheid.adres&gt;</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/id/adres/1864311&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
    </span><span class="n">OPTIONAL</span><span class="p">{</span><span class="w">
    </span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="n">?generatedAtTime</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">rdf:</span><span class="n">type</span><span class="w"> </span><span class="n">?type</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="n">Gebouweenheid</span><span class="p">.</span><span class="n">geometrie</span><span class="w"> </span><span class="n">?geometrie</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="n">Gebouweenheid</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="n">?status</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">gebouweenheid:</span><span class="n">functie</span><span class="w"> </span><span class="n">?functie</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">generiek:</span><span class="n">lokaleIdentificator</span><span class="w"> </span><span class="n">?lokaleIdentificator</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">generiek:</span><span class="n">naamruimte</span><span class="w"> </span><span class="n">?naamruimte</span><span class="w"> </span><span class="p">.</span><span class="w">
	</span><span class="n">?gebouweenheid</span><span class="w"> </span><span class="nn">generiek:</span><span class="n">versieIdentificator</span><span class="w"> </span><span class="n">?versieIdentificator</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="p">}}</span><span class="w">
</span></code></pre></div></div> <p>This SPARQL query returns multiple triples with information about building units. These triples can then be converted into an RDF file.</p> <p>The RDF file should be as follow:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns1:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/generiek#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns2:</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/gebouw#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns3:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="nl">&lt;https://data.vlaanderen.be/id/gebouweenheid/14635685&gt;</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">ns2:</span><span class="n">Gebouweenheid</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ns3:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="s">"2022-06-27T20:51:02+02:00"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="nn">ns2:</span><span class="n">Gebouweenheid</span><span class="p">.</span><span class="n">geometrie</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="nn">ns2:</span><span class="n">Gebouweenheid</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/id/conceptscheme/gerealiseerd&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">ns2:</span><span class="n">functie</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/id/conceptscheme/nietGekend&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="nn">ns1:</span><span class="n">lokaleIdentificator</span><span class="w"> </span><span class="s">"14635685"</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="nn">ns1:</span><span class="n">naamruimte</span><span class="w"> </span><span class="s">"https://data.vlaanderen.be/id/gebouweenheid"</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="nn">ns1:</span><span class="n">versieIdentificator</span><span class="w"> </span><span class="s">"2022-06-27T20:51:02+02:00"</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
